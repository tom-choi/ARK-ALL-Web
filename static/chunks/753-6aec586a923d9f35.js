"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[753],{3302:function(e,t,r){r.d(t,{Z:function(){return navBarSecondary}});var a=r(5893);r(2304);var l=r(7294);let n=l.forwardRef(function({title:e,titleId:t,...r},a){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),e?l.createElement("title",{id:t},e):null,l.createElement("path",{fillRule:"evenodd",d:"M7.72 12.53a.75.75 0 0 1 0-1.06l7.5-7.5a.75.75 0 1 1 1.06 1.06L9.31 12l6.97 6.97a.75.75 0 1 1-1.06 1.06l-7.5-7.5Z",clipRule:"evenodd"}))});var i=r(6152),o=r(9834),navBarSecondary=e=>{let t=e.returnStr?e.returnStr:"主頁";return(0,a.jsxs)("div",{className:"w-full mb-5",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-10",children:[(0,a.jsxs)("div",{className:"flex items-center  text-themeColor text-xl font-bold",children:[(0,a.jsx)("div",{className:"flex flex-col justify-center",children:(0,a.jsx)(n,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{className:" hover:cursor-pointer hover:opacity-50",onClick:()=>{e.clearLocStorage&&localStorage.clear(),window.location.href=e.returnLocation},children:["返回",t]})]}),(0,a.jsxs)("div",{className:"hidden mr-3 space-x-4 lg:flex nav__item",children:[(0,a.jsx)(i.Z,{}),(0,a.jsx)(o.Z,{})]})]}),!1]})}},3290:function(e,t,r){r.d(t,{c6:function(){return ARKLabeledInput},lS:function(){return ARKListImageInput},nS:function(){return ARKTextInput},w7:function(){return ARKImageInput}});var a=r(5893),l=r(7294),n=r(2132),i=r(5848),o=r(1338);let c={border:{focused:"border-opacity-100",blurred:"border-opacity-50"},label:{focused:"text-md opacity-100",blurred:"text-sm opacity-80"}},ARKTextInput=e=>{let{placeholder:t,type:r,isRequired:i}=e.base,{regName:o,thisErr:s,errText:d,register:u}=e,[m,f]=(0,l.useState)(c.border.blurred),[h,p]=(0,l.useState)(c.label.blurred),x=(0,l.useRef)();return(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-themeColor font-bold ".concat(h," transition-all"),ref:x,children:t}),(0,a.jsx)("input",{className:"border-2 border-themeColor ".concat(m," outline-none rounded-lg h-10 p-2"),placeholder:t,type:r||"text",...u(o,{required:!!i&&(d||"未正確輸入")}),onFocus:()=>{f(c.border.focused),p(c.label.focused)},onBlur:()=>{f(c.border.blurred),p(c.label.blurred)}}),(0,a.jsx)(n.IF,{condition:s,children:(0,a.jsx)("p",{className:"text-alert text-sm font-bold",children:d||"未正確輸入！"})})]})},ARKLabeledInput=e=>{let{title:t,condition:r}=e;return(0,a.jsx)(n.IF,{condition:r||void 0==r,children:(0,a.jsxs)("div",{className:"flex items-center mb-3 gap-3",children:[(0,a.jsx)("span",{className:"text-themeColor font-bold mr-5",children:e.title||"項目"}),e.children]})})},ARKImageInput=e=>{let{regName:t,isRequired:r,initialImgURL:o}=e.base,{register:c,setValue:s,errText:d,thisErr:u}=e,[m,f]=(0,l.useState)(void 0),[h,p]=(0,l.useState)(!0),x=l.createRef();return(0,a.jsxs)("div",{className:"flex flex-col w-96 h-96 items-center justify-center mx-auto bg-themeColorUltraLight dark:bg-gray-700 rounded-lg border-4 border-themeColor border-dashed min-h-24 hover:cursor-pointer hover:opacity-50 hover:scale-[1.02] transition-all",style:{backgroundImage:"url(".concat(m||o,")"),backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},onClick:()=>x.current.click(),children:[(0,a.jsx)(n.IF,{condition:h&&!o,children:(0,a.jsxs)("div",{className:"flex flex-col justify-center",children:[(0,a.jsx)("div",{className:"flex items-center justify-center mb-2",children:(0,a.jsx)(i.Z,{className:"w-10 h-10 text-themeColor"})}),(0,a.jsx)("div",{children:(0,a.jsx)("h3",{className:"font-bold text-xl text-themeColor",children:"封面圖片"})})]})}),(0,a.jsx)("input",{type:"file",accept:"image/*",className:"hidden",...c(t,{required:!!r&&(d||"需要圖片")}),ref:x,onChange:e=>{let r=e.target.files[0];r&&(p(!1),f(URL.createObjectURL(r)),s(t,r))}})]})},ARKListImageInput=e=>{let{regName:t,isRequired:r,numLimit:n=4,mode:c="object"}=e.base,{register:s,imgList:d,setValue:u,errText:m,thisErr:f}=e,h=l.createRef(),[p,x]=(0,l.useState)(""),AddToObjList=(e,t,r,a,l)=>{let n=e.target.files,i=n.length,c=r?Object.keys(r).length:0;if(i>a||i+c>a){alert(m||"圖片不能超過".concat(a,"張！"));return}let s=[];r&&Object.keys(r).map(e=>{s.push(r[e])}),Object.entries(n).map(e=>{let[t,r]=e,a=(0,o.Ag)(r);s.push(a)});let d=Object.fromEntries(Array.from(s,(e,t)=>[t,e]));l(t,d)},AddToArrayList=(e,t,r,a,l)=>{let n=e.target.files,i=n.length,o=r?r.length:0;if(i>a||i+o>a){alert("圖片不能超過".concat(a,"張"));return}if(!r){l(t,n);return}l(t,r.length>1?[...r,...Array.from(n)]:[r[0],...Array.from(n)])};return(0,a.jsx)("div",{className:"flex flex-row items-center justify-left",children:(0,a.jsxs)("div",{className:"lg:grid md:flex md:flex-col grid-cols-".concat(n," gap-4 object-cover"),children:[d&&Object.entries(d).map(e=>{let[r,l]=e;return(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute -top-12 left-[2rem] opacity-".concat(p!=r?"0":"100"," transition-all bg-white drop-shadow-lg border border-[2.5px] border-themeColorLight rounded-full px-2 py-1"),children:"點擊以刪除"}),(0,a.jsx)("img",{src:URL.createObjectURL(l),className:"w-40 h-24 rounded-md hover:scale-[1.05] transition-all hover:cursor-pointer",onMouseOver:e=>{x(r)},onMouseLeave:e=>{x("")},onClick:e=>{u(t,Object.fromEntries(Object.entries(d).filter(e=>{let[t,a]=e;return t!=r})))}})]})}),(0,a.jsxs)("div",{className:"flex flex-col w-40 h-24 items-center justify-center bg-themeColorUltraLight dark:bg-gray-700 rounded-lg border-4 border-themeColor border-dashed min-h-24 hover:cursor-pointer hover:opacity-50 hover:scale-[1.02] transition-all",onClick:()=>h.current.click(),children:[(0,a.jsx)("div",{className:"flex items-center justify-center mb-2",children:(0,a.jsx)(i.Z,{className:"w-10 h-10 text-themeColor"})}),(0,a.jsx)("input",{type:"file",accept:"image/*",multiple:!0,className:"hidden",...s(t,{required:!!r&&(m||"需要圖片")}),ref:h,onChange:e=>{switch(c){case"object":console.log("Using Object Mode."),AddToObjList(e,t,d,n,u);break;case"array":console.log("Using Array Mode."),AddToArrayList(e,t,d,n,u)}}})]})]})})}},2629:function(e,t,r){r.d(t,{S:function(){return StdButtonGrid},b:function(){return StdButton}});var a=r(5893),l=r(2132);let StdButton=e=>{let{color:t,onClickFunc:r,textContent:n,Icon:i,condition:o,type:c}=e;return(void 0==o||!0==o)&&(0,a.jsx)("button",{className:"flex items-center justify-center mx-5",onClick:r||void 0,type:c||"submit",children:(0,a.jsxs)("div",{className:"flex "+(t||"bg-themeColor")+" py-3 px-5 rounded-full text-white hover:scale-105 hover:cursor-pointer transition-all",children:[(0,a.jsx)(l.IF,{condition:void 0!=i,children:(0,a.jsx)("div",{className:"flex flex-col justify-center",children:(0,a.jsx)(i,{className:"w-5 h-5"})})}),(0,a.jsx)("div",{className:"flex flex-col justify-center ml-3",children:(0,a.jsx)("span",{children:n})})]})})},StdButtonGrid=e=>(void 0==e.condition||e.condition)&&(0,a.jsx)("div",{className:"flex items-center justify-center my-10",children:e.children})},5785:function(e,t,r){r.d(t,{J9:function(){return appendListToFormData},Vq:function(){return getClubXX},cC:function(){return deleteActivity},j7:function(){return getActivityById},ym:function(){return createActivity},yv:function(){return editActivity}});var a=r(5121),l=r(7646),n=r(1338),i=r(381),o=r.n(i);let appendListToFormData=(e,t,r,a)=>(r&&0!=("object"==a?Object.values(r):r).length?"object"==a?Object.values(r).map(r=>{e.append(t,r)}):e.append(t,JSON.stringify(r)):e.append(t,"[]"),e);async function upload(e,t,r,l){let n=!(arguments.length>4)||void 0===arguments[4]||arguments[4],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=!0;i&&(o=confirm("您即將上傳！")),n&&""!=l&&o&&await a.Z.post(t,e,{withCredentials:!0}).then(e=>{let t=e.data;"success"==t.message?(alert("成功！"),void 0!=r&&localStorage.removeItem(r),void 0!=l&&(window.location.href=l)):(alert("失敗！"),console.log(t))}).catch(e=>{console.log(e),alert("請求錯誤，請檢查網路。")})}let createActivity=async(e,t)=>{let r=(0,n.FN)(e.sDate,e.sTime),a=(0,n.FN)(e.eDate,e.eTime);if(!o()(r).isSameOrBefore(a)){alert("結束時間應該在開始時間後！");return}let{sDate:i,sTime:c,eDate:s,eTime:d,add_relate_image:u,...m}=e,f={startdatetime:(0,n.FN)(e.sDate,e.sTime,"T"),enddatetime:(0,n.FN)(e.eDate,e.eTime,"T"),...m};console.log(f);let h=(0,n.jZ)(f);u?Object.values(u).map(e=>{h.append("add_relate_image",e)}):h.append("add_relate_image","[]"),await upload(h,l.eR+l.a4.EVENT_CREATE,"createdActivityInfo","../club/clubInfo?club_num=".concat(t),!0,!0)},getClubXX=async function(e,t,r,n){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];await (0,a.Z)({headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"get",url:l.eR+t+e}).then(e=>{let t=e.data;if("success"==t.message)return r(t),i&&console.log(t),t;n&&window.alert(n)}).catch(e=>{console.log(e),window.alert("網絡錯誤！")})},getActivityById=async(e,t)=>{await (0,a.Z)({headers:{"Content-Type":"application/x-ww-form-urlencoded"},method:"get",url:l.eR+l.HT.EVENT_INFO_EVENT_ID+e}).then(e=>{let r=e.data;r.message="success",t(r)}).catch(e=>(console.log(e),window.alert("網路錯誤！"),null))},editActivity=async(e,t)=>{let r=(0,n.FN)(e.sDate,e.sTime,"T"),a=(0,n.FN)(e.eDate,e.eTime,"T"),i=new FormData;return i.append("id",e.id),i.append("title",e.title),i.append("type",e.type),i.append("link",e.link),e.cover_image_file&&i.append("cover_image_file",e.cover_image_file),i.append("startdatetime",r),i.append("enddatetime",a),appendListToFormData(i,"add_relate_image",e.add_relate_image,"object"),appendListToFormData(i,"del_relate_image",e.del_relate_image,"array"),i.append("location",e.location),i.append("introduction",e.introduction),i.append("can_follow",(!0).toString()),upload(i,l.eR+l.a4.EVENT_EDIT,void 0,"./activityDetail?activity_id=".concat(e.id,"&club_num=").concat(t))},deleteActivity=async(e,t,r)=>{if(r&&!confirm(r))return;let a=l.eR+l.a4.EVENT_DEL,n=new FormData;return n.append("id",e),upload(n,a,void 0,"./clubInfo?club_num=".concat(t))}},2148:function(e,t,r){var a=r(7294);let l=a.forwardRef(function({title:e,titleId:t,...r},l){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},r),e?a.createElement("title",{id:t},e):null,a.createElement("path",{fillRule:"evenodd",d:"M11.47 2.47a.75.75 0 0 1 1.06 0l7.5 7.5a.75.75 0 1 1-1.06 1.06l-6.22-6.22V21a.75.75 0 0 1-1.5 0V4.81l-6.22 6.22a.75.75 0 1 1-1.06-1.06l7.5-7.5Z",clipRule:"evenodd"}))});t.Z=l}}]);